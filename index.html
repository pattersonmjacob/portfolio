<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jacob Patterson | Learning Portfolio</title>
  <meta name="description" content="Simple GitHub Pages landing page for launching Evolve and SCORM web course packages." />
  <style>
    :root {
      --forest: #123524;
      --sand: #efe6d8;
      --sky: #3fa9f5;
      --ink: rgba(18, 53, 36, 0.95);
      --ink-soft: rgba(18, 53, 36, 0.72);
      --line: rgba(18, 53, 36, 0.14);
      --radius: 16px;
      --shadow: 0 8px 22px rgba(18, 53, 36, 0.12);
      --max: 980px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--ink);
      background: linear-gradient(180deg, var(--sand), #f6efe4);
      line-height: 1.5;
    }

    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: 24px 18px 48px;
    }

    .hero {
      background: linear-gradient(165deg, #133927, #1d4d35);
      color: rgba(239, 230, 216, 0.95);
      border-radius: 22px;
      padding: 24px;
      box-shadow: var(--shadow);
      margin-bottom: 22px;
    }

    .hero h1 {
      margin: 0 0 8px;
      font-size: clamp(1.4rem, 3.6vw, 2rem);
      line-height: 1.2;
    }

    .hero p {
      margin: 0;
      max-width: 68ch;
      color: rgba(239, 230, 216, 0.85);
      font-weight: 520;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }

    .card {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255, 255, 255, 0.45);
      box-shadow: 0 4px 14px rgba(18, 53, 36, 0.08);
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card h2 {
      margin: 0;
      font-size: 1.02rem;
      line-height: 1.3;
    }

    .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--ink-soft);
      background: rgba(255, 255, 255, 0.4);
    }

    .desc {
      margin: 0;
      color: var(--ink-soft);
      font-size: 0.92rem;
    }

    .actions {
      margin-top: auto;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border: 1px solid transparent;
      border-radius: 10px;
      padding: 9px 12px;
      font-size: 0.85rem;
      font-weight: 700;
      text-decoration: none;
      transition: transform 120ms ease;
    }

    .btn:hover { transform: translateY(-1px); }

    .btn-primary {
      background: var(--sky);
      color: #103120;
      border-color: rgba(18, 53, 36, 0.12);
    }

    .btn-secondary {
      background: rgba(18, 53, 36, 0.08);
      color: var(--ink);
      border-color: var(--line);
    }

    .section {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255, 255, 255, 0.4);
      padding: 16px;
      margin-top: 18px;
    }

    .section h3 {
      margin: 0 0 8px;
      font-size: 1rem;
    }

    .section ol {
      margin: 0;
      padding-left: 18px;
      color: var(--ink-soft);
    }

    .empty {
      border: 1px dashed var(--line);
      border-radius: var(--radius);
      padding: 18px;
      color: var(--ink-soft);
      background: rgba(255, 255, 255, 0.25);
    }

    code {
      background: rgba(18, 53, 36, 0.08);
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 0.85em;
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="hero">
      <h1>Course Launch Pad</h1>
      <p>
        Lightweight landing page for publishing Evolve/SCORM web packages on GitHub Pages.
        Keep each package in its own folder, add one entry in <code>courses.json</code>, and it appears below.
      </p>
    </section>

    <section>
      <div id="courses" class="grid" aria-live="polite"></div>
    </section>

    <section class="section" aria-labelledby="upload-title">
      <h3 id="upload-title">How to add a new package</h3>
      <ol>
        <li>Create a folder like <code>courses/my-course/</code> and upload your package files there (for Evolve exports this usually includes <code>index.html</code>, <code>assets/</code>, and manifest files).</li>
        <li>Add a new object in <code>courses.json</code> with <code>launchUrl</code> (direct package) and/or <code>courseFile</code> (shared viewer mode).</li>
        <li>Commit and push. GitHub Pages will publish the new course link automatically.</li>
      </ol>
    </section>
  </main>

  <script>
    const coursesRoot = document.getElementById('courses');

    function escapeHtml(value) {
      return String(value)
        .replaceAll('&', '&amp;')
        .replaceAll('<', '&lt;')
        .replaceAll('>', '&gt;')
        .replaceAll('"', '&quot;')
        .replaceAll("'", '&#39;');
    }

    function launchHref(course) {
      if (course.launchUrl) return course.launchUrl;
      if (course.courseFile) {
        const safe = String(course.courseFile).replace(/[^a-zA-Z0-9._\/-]/g, '');
        return `course-viewer.html?course=${encodeURIComponent(safe)}`;
      }
      return null;
    }

    function renderCourses(courses) {
      if (!Array.isArray(courses) || courses.length === 0) {
        coursesRoot.innerHTML = '<div class="empty">No courses are listed yet. Add entries to <code>courses.json</code> to publish packages.</div>';
        return;
      }

      coursesRoot.innerHTML = courses.map((course) => {
        const title = escapeHtml(course.title || 'Untitled course');
        const description = escapeHtml(course.description || 'No description provided.');
        const author = escapeHtml(course.author || 'Unknown author');
        const type = escapeHtml(course.type || 'Web package');
        const directHref = course.launchUrl ? escapeHtml(course.launchUrl) : null;
        const viewerHref = course.courseFile
          ? `course-viewer.html?course=${encodeURIComponent(String(course.courseFile).replace(/[^a-zA-Z0-9._\/-]/g, ''))}`
          : null;
        const primaryHref = launchHref(course);

        const actions = [];
        if (primaryHref) {
          actions.push(`<a class="btn btn-primary" href="${escapeHtml(primaryHref)}" target="_blank" rel="noopener">Launch</a>`);
        }
        if (directHref && viewerHref) {
          actions.push(`<a class="btn btn-secondary" href="${viewerHref}" target="_blank" rel="noopener">Open in viewer</a>`);
        }

        return `
          <article class="card">
            <h2>${title}</h2>
            <div class="meta">
              <span class="chip">${type}</span>
              <span class="chip">${author}</span>
            </div>
            <p class="desc">${description}</p>
            <div class="actions">${actions.join('')}</div>
          </article>
        `;
      }).join('');
    }

    fetch('courses.json')
      .then((response) => {
        if (!response.ok) {
          throw new Error(`Unable to load courses.json (${response.status})`);
        }
        return response.json();
      })
      .then((data) => renderCourses(data.courses))
      .catch((error) => {
        coursesRoot.innerHTML = `<div class="empty">Could not load course list. ${escapeHtml(error.message)}</div>`;
      });
  </script>
</body>
</html>
